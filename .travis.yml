language: python
matrix:
  include:
  - name: linux 3
    python: 3.6
    os: linux
    before_install:
    - pip install -r requirements.txt
  - name: linux 2
    python: 2.7
    os: linux
    before_install:
    - pip install -r requirements.txt
  - os: osx
    osx_image: xcode11.2
    language: shell
    before_install:
    - pip install -r requirements.txt
  - name: Windows 3
    os: windows
    language: shell
    before_install:
    - choco install python --version 3.8.1 --no-progress
    - export PATH="/c/Python38:/c/Python38/Scripts:$PATH"
    - cp /c/Python38/python.exe /c/Python38/python3.exe
    - pip install -r requirements.txt
    - pip install wheel
  - name: Windows 2
    os: windows
    language: shell
    before_install:
    - choco install python2 --no-progress
    - choco install --ignore-dependencies vcpython27
    - export PATH="/c/Python27:/c/Python27/Scripts:$PATH"
    - pip install -r requirements.txt
    - pip install wheel
install:
- python setup.py build_ext --inplace
- python setup.py sdist bdist_wheel
script:
- export PYTHONPATH=$TRAVIS_BUILD_DIR
- python tests/test.py
notifications:
  email:
    recipients:
    - carlk@msn.com
    on_success: always
    on_failure: always
deploy:
  provider: releases
  api_key:
    secure: EVTLmxU3MTgRKbrX2P16I/x0lcxPafrXQ4XTNHgywW5mTGlEze9zv5og3frkifAtCH3SOaTACdz2QSh8tlaoTvcnQlkcBG+FPdRUfvyTaWV3nE/x0zw6jGHrD5MxeIMecP+AaNKN5SQ/uN55petruRNZz/PFQnpjm9JL4GEGv92GyeqkXigv4eWtomBtFuD0c9AH3QhGFI1vsPBSp39wyKbX03b7KqstyC24giIzNpcY7Hsz8vxthDYm8PV9JALzYlhvPTVPo7ZdhLohtBkvLeo+P+TCSKzBV4QgH7LF17K0hQAONBk0+HXz2swxQQdqa0KUskqjDt2C3peoiHxP0BkBOsrYGiHSJaKDuurhdQsapTGjKsGyL7cWUHtYr0uNVqcz0q0eK/VJwNMdczerU227Hpjqe1ciTBFb0vCWA6cYem5Pd6Lt4QLe658SQLoKmNFmYmB5I97Guyc3D0xaFGHIU+cqd1akcZXuxKzEpYl6eIkay9+ol2u7BKcFjwSdKT58RQlBZbGv6kBnG4fLDcQmPr9mHiX++InhP0sRi5mFSUMSBWIRwKOrMknvK3hmDMV/0/c+584dK7pYFN5jJ9CqNPtUhNWzvJVKKG6mPFdNIvdWD6Z0HbTU60h06hIyqORoZKKaasYIjzjJSf8wGXjjdz/ib2uvdgD9dSnMm4U=
  file: dist/*
  on:
    repo: fastlmm/PySnpTools
    branch: dev
