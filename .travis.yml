language: python
matrix:
  include:
    - name: "linux 3"
      python: 3.6
      os : linux
      before_install:
        - pip install -r requirements.txt
    - name: "linux 2"
      python: 2.7
      os : linux
      before_install:
        - pip install -r requirements.txt
    - os: osx
      osx_image: xcode11.2
      language: shell
      before_install:
        - pip install -r requirements.txt
    - name: "Windows 3"
      os : windows
      language: shell
      before_install:
        - choco install python --version 3.8.1 --no-progress
        - export PATH="/c/Python38:/c/Python38/Scripts:$PATH"
        - cp /c/Python38/python.exe /c/Python38/python3.exe
        - pip install -r requirements.txt
    - name: "Windows 2"
      os : windows
      language: shell
      before_install:
        - choco install python2 --no-progress
        - choco install --ignore-dependencies vcpython27
        - export PATH="/c/Python27:/c/Python27/Scripts:$PATH"
        - pip install -r requirements.txt

install:
   - python setup.py build_ext --inplace
   - python setup.py sdist bdist_wheel

script:
   - export PYTHONPATH=$TRAVIS_BUILD_DIR
   - #python tests/test.py

deploy:
  provider: script
  script: ls -las
  skip_cleanup: true


#deploy:
#  provider: releases
#  api_key: "GITHUB OAUTH TOKEN"
#  file: "FILE TO UPLOAD"
#  skip_cleanup: true
#  draft: true

notifications:
  email:
    recipients:
      - carlk@msn.com
    on_success: always
    on_failure: always
